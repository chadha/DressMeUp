try{(function(){var q={};q.html={};q.html.cookie={};q.html.cookie={};q.html.cookie.maxCookieLength=3000;q.html.cookie.token="_x_c_";q.html.cookie.separator="_";q.html.cookie.readCookie=function(name,id){var r,cookie,value,cookies,nameSearchString,i,ii,tokenLoc;nameSearchString=name+(id?q.html.cookie.separator+id:"")+"=";cookies=document.cookie.split(";");r=/^\s+|\s+$/g;for(i=0,ii=cookies.length;i<ii;i+=1){cookie=cookies[i].replace(r,"");if(cookie.indexOf(nameSearchString)===0){value=unescape(cookie.substring(nameSearchString.length));if(value.length===0){return null}tokenLoc=value.indexOf(q.html.cookie.token);if(tokenLoc>=0){value=value.substring(0,tokenLoc);value+=q.html.cookie.readExtraValues(name,id,cookies,r)}return value}}return null};q.html.cookie.readExtraValues=function(name,id,cookies,r){var i,ii,c,toks,tokenLoc,nextId,v,value;c={};for(i=0,ii=cookies.length;i<ii;i+=1){toks=cookies[i].split("=");c[toks[0].replace(r,"")]=unescape(toks[1])}nextId=id?id+1:1;value="";while(true){v=c[name+q.html.cookie.separator+nextId];if(v){tokenLoc=v.indexOf(q.html.cookie.token);if(tokenLoc===-1){value+=v;break}else{value+=v.substring(0,tokenLoc)}}else{break}nextId+=1}return value};q.html.cookie.writeCookie=function(name,value,days,domain,id){var date,expires,cookie,realName,cookieLength,nextId;if(value.length>=q.html.cookie.maxCookieLength*50){throw"value to big to store"}if(days){date=new Date();date.setTime(date.getTime()+(days*86400000));expires="; expires="+date.toGMTString()}else{expires=""}realName=name+(id?(q.html.cookie.separator+id):"");cookie=escape(realName)+"="+escape(value)+expires+"; path=/;";if(domain){cookie+=" domain="+domain}if(!id){nextId=1}else{nextId=id+1}if(cookie.length>q.html.cookie.maxCookieLength){cookieLength=q.html.cookie.maxCookieLength-q.html.cookie.token.length-(escape(realName)+"="+expires+"; path=/;").length;cookieLength=q.html.cookie.getEscapeSafeLength(value,cookieLength);cookie=escape(realName)+"="+escape(value).substring(0,cookieLength)+q.html.cookie.token+expires+"; path=/;";q.html.cookie.writeCookie(name,unescape(escape(value).substring(cookieLength)),days,domain,nextId)}else{while(q.html.cookie.readCookie(name,nextId)){q.html.cookie.writeCookie(name,"",days,domain,nextId);nextId+=1}}document.cookie=cookie};q.html.cookie.getEscapeSafeLength=function(str,length){var bad=true,escaped,times=0;while(bad&&(times<10)){escaped=escape(str);bad=(unescape(escaped.substring(0,length))+unescape(escaped.substring(length)))!==str;if(bad){length-=1}times+=1}return length};q.html.cookie.canWriteCookie=function(persistent,domain,cookieName){var _cookieName,canWrite;_cookieName=cookieName||("cw_test_"+Math.round(Math.random()*1000));q.html.cookie.writeCookie(_cookieName,"a",persistent?1:null,domain);canWrite="a"===q.html.cookie.readCookie(_cookieName);if(canWrite){q.html.cookie.writeCookie(_cookieName,"a",-1,domain)}return canWrite};q.html.fileLoader={};q.html.fileLoader.load=function(url,preLoadAction,postLoadHandler,parentNode,async,attributes){var scriptEl,preLoadResult,loadError,doPostLoad,loaded;loaded=false;doPostLoad=function(loadFailed){return function(){if(!loaded){loaded=true;if(loadFailed&&!loadError){loadError={url:document.location.href}}postLoadHandler(url,loadError,loadFailed)}}};try{if(preLoadAction){preLoadResult=preLoadAction(url)}}catch(e){preLoadResult=false;postLoadHandler(url,"Exception loading pre",true)}finally{if(preLoadResult!==false){scriptEl=q.html.fileLoader.createScriptEl(url,async,false,attributes);if(postLoadHandler){scriptEl.onload=doPostLoad(false);scriptEl.onerror=doPostLoad(true);scriptEl.onreadystatechange=function(){if((this.readyState==="complete")||(this.readyState==="loaded")){setTimeout(function(){doPostLoad(false)()},1)}}}if(!parentNode){parentNode=window.document.getElementsByTagName("head")[0]}parentNode.appendChild(scriptEl)}}};q.html.fileLoader.createScriptEl=function(path,async,forceReload,attr){var a,scriptEl=document.createElement("script");scriptEl.type="text/javascript";scriptEl.src=q.html.fileLoader.tidyUrl(path)+(forceReload?("?"+new Date().getTime()):"");if(async!==false){scriptEl.async="true";scriptEl.defer="true"}else{scriptEl.async="false";if(scriptEl.async!==false){scriptEl.async=false}scriptEl.defer="false"}for(a in attr){if(attr.hasOwnProperty(a)){scriptEl.setAttribute(a,attr[a])}}return scriptEl};q.html.fileLoader.tidyUrl=function(path){if(path.substring(0,5)==="http:"){return path}if(path.substring(0,6)==="https:"){return path}return"//"+path};q.html.PostData=function(url,data,type){var _post,agent,isIe,isIe9,isOldIe,fullUrl,loaded,retry,retryDelay,retryCount;retryCount=5;retryDelay=2000;loaded=false;retry=function(){if(retryCount>0){setTimeout(function(){if(!loaded){retryCount-=1;_post()}},retryDelay)}};agent=navigator.userAgent.toLowerCase();isIe=agent.indexOf("msie")!==-1;isIe9=agent.indexOf("msie 9")!==-1;isOldIe=((agent.indexOf("msie 7")!==-1)||(agent.indexOf("msie 6")!==-1));fullUrl=("https:"===document.location.protocol?"https:":"http:")+url;type=type||"POST";_post=function(){var xhr;try{xhr=null;try{xhr=new XMLHttpRequest()}catch(e1){}if(xhr&&!isIe){xhr.open(type,fullUrl,true)}else{if(typeof XDomainRequest!=="undefined"){xhr=new XDomainRequest();xhr.open(type,fullUrl)}else{xhr=null}}try{xhr.withCredentials=false}catch(e2){}if(xhr.setRequestHeader){xhr.setRequestHeader("Content-Type","text/plain;charset=UTF-8")}xhr.onload=function(){loaded=true};xhr.onreadystatechange=function(){};xhr.ontimeout=function(){};xhr.onerror=function(){};xhr.onprogress=function(){};xhr.send(data)}catch(err){try{try{q.html.fileLoader.load(fullUrl)}catch(err2){if(window.console&&window.console.log){window.console.log(err)}}}catch(e){}}retry()};if(isOldIe){q.html.fileLoader.load(fullUrl);return}else{_post()}};(function(){q.html.selectors={};if(document.getElementsByClassName){q.html.selectors.getElementsByClassName=function(className,tag,elm){elm=elm||document;var elements=elm.getElementsByClassName(className),nodeName=(tag)?new RegExp("\\b"+tag+"\\b","i"):null,returnElements=[],current,i,il;for(i=0,il=elements.length;i<il;i+=1){current=elements[i];if(!nodeName||nodeName.test(current.nodeName)){returnElements.push(current)}}return returnElements}}else{if(document.evaluate){q.html.selectors.getElementsByClassName=function(className,tag,elm){tag=tag||"*";elm=elm||document;var classes=className.split(" "),classesToCheck="",xhtmlNamespace="http://www.w3.org/1999/xhtml",namespaceResolver=(document.documentElement.namespaceURI===xhtmlNamespace)?xhtmlNamespace:null,returnElements=[],elements,node,j,jl;for(j=0,jl=classes.length;j<jl;j+=1){classesToCheck+="[contains(concat(' ', @class, ' '), ' "+classes[j]+" ')]"}try{elements=document.evaluate(".//"+tag+classesToCheck,elm,namespaceResolver,0,null)}catch(e){elements=document.evaluate(".//"+tag+classesToCheck,elm,null,0,null)}while(!!(node=elements.iterateNext())){returnElements.push(node)}return returnElements}}else{q.html.selectors.getElementsByClassName=function(className,tag,elm){tag=tag||"*";elm=elm||document;var classes=className.split(" "),classesToCheck=[],elements=(tag==="*"&&elm.all)?elm.all:elm.getElementsByTagName(tag),current,returnElements=[],match,k,kl,l,ll,m,ml;for(k=0,kl=classes.length;k<kl;k+=1){classesToCheck.push(new RegExp("(^|\\s)"+classes[k]+"(\\s|$)"))}for(l=0,ll=elements.length;l<ll;l+=1){current=elements[l];match=false;for(m=0,ml=classesToCheck.length;m<ml;m+=1){match=classesToCheck[m].test(current.className);if(!match){break}}if(match){returnElements.push(current)}}return returnElements}}}}());q.html.GlobalEval={};q.html.GlobalEval.globalEval=function(src){if(window.execScript){window.execScript(src)}else{var fn=function(){window["eval"].call(window,src)};fn()}};var JSON={};(function(){function f(n){return n<10?"0"+n:n}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function stringifyDate(key){return isFinite(key.valueOf())?key.getUTCFullYear()+"-"+f(key.getUTCMonth()+1)+"-"+f(key.getUTCDate())+"T"+f(key.getUTCHours())+":"+f(key.getUTCMinutes())+":"+f(key.getUTCSeconds())+"Z":null}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value instanceof Date){value=stringifyDate(value)}else{if((value instanceof String)||(value instanceof Number)||(value instanceof Boolean)){value=value.valueOf()}}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());q.html.UVCommonValues={};q.html.UVCommonValues.keys=["version","page","category","subcategory","user","name","username","user_id","email","language","returning","facebook_id","twitter_id","listing","items","id","sku","url","manufacturer","color","currency","unit_price","unit_sale_price","basket","subtotal","subtotal_include_tax","tax","shipping_cost","total","line_items","product","sku_code","quantity","environment","variation","revision","age","gender","first_order","registered_today","registered_in_current_session","registration_date","last_order_date","last_transaction_payment_type"];q.html.UVCommonValues.values=["",true,false,"true","false","GBP","USD","production"];(function(){var UVCompressor={},level,uv;var indexOfArray=function(inputArray,elt,from){var len=inputArray.length;from=Number(arguments[2])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len}for(;from<len;from+=1){if(inputArray.hasOwnProperty(from)&&inputArray[from]===elt){return from}}return -1};UVCompressor.replaceCommonValues=function(subjectVariable){var i=0,ii=subjectVariable.length,returnArray=[],rawKeyName,keyName,returnObject={},keyID;if(subjectVariable.constructor===Array){for(;i<ii;i+=1){returnArray.push(UVCompressor.replaceCommonValues(subjectVariable[i]))}return returnArray}else{if(subjectVariable.constructor===Object){for(rawKeyName in subjectVariable){if(subjectVariable[rawKeyName]!==undefined&&subjectVariable[rawKeyName]!==null&&(typeof subjectVariable[rawKeyName]!=="string"||subjectVariable[rawKeyName].trim().length>0)){keyName=rawKeyName.trim();keyID=indexOfArray(q.html.UVCommonValues.keys,keyName);keyName=(keyID===-1||level===0)?keyName:keyID;returnObject[keyName]=UVCompressor.replaceCommonValues(subjectVariable[rawKeyName])}}return returnObject}else{if(typeof subjectVariable==="string"){subjectVariable=subjectVariable.trim()}return subjectVariable}}};UVCompressor.restoreCommonValues=function(subjectVariable){var i=0,ii=subjectVariable.length,returnArray=[],keyName,returnObject={},key;if(subjectVariable.constructor===Array){for(;i<ii;i+=1){returnArray.push(UVCompressor.restoreCommonValues(subjectVariable[i]))}return returnArray}else{if(subjectVariable.constructor===Object){for(key in subjectVariable){if(subjectVariable.hasOwnProperty(key)){keyName=(isNaN(Number(key)))?key:q.html.UVCommonValues.keys[Number(key)];returnObject[keyName]=UVCompressor.restoreCommonValues(subjectVariable[key])}}return returnObject}else{return subjectVariable}}};UVCompressor.compress=function(options){level=(options.compressionLevel===undefined)?1:options.compressionLevel;uv=options.universalVariable;return JSON.stringify(UVCompressor.replaceCommonValues(uv))};UVCompressor.decompress=function(compressedObjectJSON){var compressedObject=JSON.parse(compressedObjectJSON);return JSON.stringify(UVCompressor.restoreCommonValues(compressedObject))};q.html.UVCompressor=UVCompressor}());(function(){var DOMContentLoaded,isReady=false,readyWait=1,readyList,readyComplete,bindReadyComplete,doScrollCheck;readyComplete=function(wait){var f;if(wait===true){readyWait-=1}if(!readyWait||(wait!==true&&!isReady)){if(!document.body){return setTimeout(readyComplete,1)}isReady=true;if(wait!==true){readyWait-=1;if(readyWait>0){return}}while(readyList.length>0){f=readyList.shift();f()}}};doScrollCheck=function(){if(isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}readyComplete()};bindReadyComplete=function(){if(readyList){return}readyList=[];if(document.readyState==="complete"){return setTimeout(readyComplete,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",readyComplete,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",readyComplete);var toplevel=false;try{toplevel=(window.frameElement===null)||(window.frameElement===undefined)}catch(e){}if(document.documentElement.doScroll&&toplevel){doScrollCheck()}}}};q.html.ready=function(fn){bindReadyComplete();if(isReady){setTimeout(fn,1)}else{readyList.push(fn)}};if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);readyComplete()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);readyComplete()}}}}}());q.cookie={};q.cookie.Tracker={};q.cookie.Tracker._cookieName="_qubitTracker";q.cookie.Tracker._cookieSessionName="_qubitTracker_s";q.cookie.Tracker.getVisitorId=function(domain){if(!window.__qb_visitorid__){q.cookie.Tracker._setValues(domain)}return window.__qb_visitorid__.global};q.cookie.Tracker.getVisitorMetaData=function(domain){if(!window.__qb_visitorid__){q.cookie.Tracker._setValues(domain)}return window.__qb_visitorid__};q.cookie.Tracker._setValues=function(domain){var canCookie,globalValue,persistValue,sessionValue,origPersistValue,origSessionValue;canCookie=q.html.cookie.canWriteCookie(domain);origPersistValue=q.html.cookie.readCookie(q.cookie.Tracker._cookieName);origSessionValue=q.html.cookie.readCookie(q.cookie.Tracker._cookieSessionName);if(canCookie&&!origPersistValue){if(origSessionValue){persistValue=origSessionValue}else{persistValue=q.cookie.Tracker._getRandomId()}q.html.cookie.writeCookie(q.cookie.Tracker._cookieName,persistValue,365,domain)}else{if(canCookie){q.html.cookie.writeCookie(q.cookie.Tracker._cookieName,origPersistValue,365,domain)}else{persistValue=null}}if(canCookie&&!origSessionValue){if(origPersistValue){sessionValue=origPersistValue}else{sessionValue=q.cookie.Tracker._getRandomId()}q.html.cookie.writeCookie(q.cookie.Tracker._cookieSessionName,sessionValue,null,domain)}else{sessionValue=null}globalValue=origPersistValue||persistValue||origSessionValue||sessionValue||q.cookie.Tracker._getRandomId();window.__qb_visitorid__={global:globalValue,persist:origPersistValue||persistValue||"",session:origSessionValue||sessionValue||"",canCookie:canCookie}};q.cookie.Tracker._getRandomId=function(){var cookieId=new Date().getTime().toString();cookieId=cookieId+"."+Math.floor(Math.random()*999999);return cookieId};q.cookie.SessionCounter={};q.cookie.SessionCounter._cookieName="_qst";q.cookie.SessionCounter._sessionCookie="_qsst";q.cookie.SessionCounter._gaCookie="__utma";q.cookie.SessionCounter.update=function(domain){var c,s,ga,mins=30;c=q.html.cookie.readCookie(q.cookie.SessionCounter._cookieName);s=q.html.cookie.readCookie(q.cookie.SessionCounter._sessionCookie);ga=q.cookie.readGaSessionCount();if(!c){c=[1,ga]}else{c=JSON.parse(c);if(typeof c==="string"){c=JSON.parse(c)}if(!s||(parseInt(s,10)<(new Date().getTime()-mins*60*1000))){c[0]+=1}}c=JSON.stringify(c);q.html.cookie.writeCookie(q.cookie.SessionCounter._cookieName,c,365,domain);q.html.cookie.writeCookie(q.cookie.SessionCounter._sessionCookie,new Date().getTime().toString(),null,domain);return c};q.cookie.readGaSessionCount=function(){var ga=q.html.cookie.readCookie(q.cookie.SessionCounter._gaCookie);if(ga){try{ga=ga.split(".");if(ga[5]){ga=parseInt(ga[5],10)}else{ga=0}}catch(e){ga=0}}else{ga=0}return ga};q.cookie.PageView={};q.cookie.PageView.update=function(){var a,r;r=function _(){return(Math.floor(1+Math.random()*65536)).toString(36).substring(1)};if(!window.__pageViewId__){a=new Date().getTime().toString(36);window.__pageViewId__=a+r()+r()+r()}return window.__pageViewId__};var qTracker={cookieId:"",pageCookieName:"_qPageNum",loadTime:new Date(),IGNORE_PATTERN:"IGNORE_THIS_PATTERN",NO_SEARCH_KEY:"notBeingUsed__blah_muck_it_up",DEFAULT_URL:"pong.qubitproducts.com/t2",start:function(){qTracker.timeouts={};if(qTracker.loadConfig()){qTracker.resetGlobalInterface();qTracker.waitTillBody()}},waitTillBody:function(){if(document&&document.body&&document.getElementById){qTracker.init()}else{setTimeout(qTracker.waitTillBody,100)}},loadConfig:function(){var i,ii,j,el,params={};if(window._qtd){for(i=0,ii=_qtd.length;i<ii;i+=1){el=_qtd[i];for(j in el){if(el.hasOwnProperty(j)){if(params[j]){qTracker.mixin(params[j],el[j])}else{params[j]=el[j]}}}}if(!qTracker.validateParams(params)){return false}qTracker.setConfigValues(params);return true}},validateParams:function(params){var optionsOk=params.options&&params.options.clientId;return optionsOk},mixin:function(existing,newValue){var i;for(i in newValue){if(newValue.hasOwnProperty(i)){existing[i]=newValue[i]}}},setConfigValues:function(params){var name;qTracker.options=params.options;if(!qTracker.options.domain){qTracker.options.domain=""}if(!qTracker.options.serverUrl){qTracker.options.serverUrl=qTracker.DEFAULT_URL}if(params.custom){qTracker.customValues=params.custom;for(name in qTracker.customValues){if(qTracker.customValues.hasOwnProperty(name)){qTracker.customValues[name].name=name}}}if(params.data){qTracker.initialData=params.data}else{qTracker.initialData={}}if(qTracker.options.doCd){if(!qTracker.options.cdClient){qTracker.options.doCd=false}if(!qTracker.options.cdFrameLocation){qTracker.options.cdFrameLocation=("https:"===document.location.protocol?"https:":"http:")+"//dkl2tqmjys2z2.cloudfront.net"}}if(!qTracker.options.scrubUv){qTracker.options.scrubUv=false}if(!qTracker.options.compressUV){qTracker.options.compressUV=false}},resetGlobalInterface:function(){window._qtd={push:function(v){var name;if(v.custom){for(name in v.custom){if(v.custom.hasOwnProperty(name)){v.custom[name].name=name;if(!v.custom[name].checkAmount){v.custom[name].checkAmount=5}qTracker.doAsyncCheck(v.custom[name])}}}if(v.data){qTracker.sendPing(JSON.stringify(v.data))}if(v.resendUniversalVariables){qTracker.sendUniversal()}}}},init:function(){if(qTracker.initialised){return}qTracker.initialised=true;if(navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){return}qTracker.isIE=navigator.userAgent.indexOf("MSIE")!==-1;qTracker.isOldIE=/MSIE 7/.test(navigator.userAgent);qTracker.timeLoaded=(new Date()).getTime();qTracker.run()},run:function(){qTracker.handleCookie();qTracker.incrementPageView();try{qTracker.doWhenReady(qTracker.doRun)}catch(ex){}window.onbeforeunload=qTracker.unloadHandler(window.onbeforeunload)},doWhenReady:function(fn){if(document&&document.getElementById&&document.body){fn()}else{setTimeout(function(){qTracker.doWhenReady(fn)},10)}},doRun:function(){qTracker.callServer(0,qTracker.loadCustom());qTracker.sendUniversal()},handleCookie:function(){q.cookie.Tracker.getVisitorId(qTracker.options.domain)},unloadHandler:function(originalUnload){return function(){qTracker.close();if(originalUnload){return originalUnload()}}},close:function(){try{qTracker.callServer(1,qTracker.loadCustom())}catch(ex){}},incrementPageView:function(){var pageNumber=qTracker.readPageNumber();if(pageNumber===null){pageNumber=-1}else{pageNumber=parseInt(pageNumber,10)}if(qTracker.testSessionCookie()){pageNumber+=1;q.html.cookie.writeCookie(qTracker.getPageCookieName(),pageNumber,null,qTracker.options.domain)}return pageNumber},readPageNumber:function(){var pageNumber;pageNumber=q.html.cookie.readCookie(qTracker.getPageCookieName());if(pageNumber===null){pageNumber=q.html.cookie.readCookie(qTracker.pageCookieName)}return pageNumber},getPageCookieName:function(){return qTracker.pageCookieName+"_"+qTracker.options.clientId},testSessionCookie:function(force){if(!force&&(qTracker.sessionCookieStatus!==undefined)){return qTracker.sessionCookieStatus}var testCookieName="test-session-cookie",testCookieValue="true";q.html.cookie.writeCookie(testCookieName,testCookieValue,0);qTracker.sessionCookieStatus=testCookieValue===q.html.cookie.readCookie(testCookieName);q.html.cookie.writeCookie(testCookieName,"",-1);return qTracker.sessionCookieStatus},sendUniversal:function(){var compressOptions,uv;uv=qTracker.getUniversalVariable();if(uv){if(qTracker.isOldIE){if(uv.transaction&&(uv.transaction.total||uv.transaction.order_id)){qTracker.sendPing(JSON.stringify({_c_con_ct:uv.transaction.total,_c_con_ordn:uv.transaction.order_id,_c_con_dc:uv.transaction.shipping_cost,_c_con_cu:uv.transaction.currency,_c_con_sub:uv.transaction.subtotal}))}}else{if(qTracker.options.compressUV){compressOptions={universalVariable:uv,compressionLevel:1};qTracker.callServer(2,null,q.html.UVCompressor.compress(compressOptions))}else{qTracker.callServer(2,null,JSON.stringify(uv))}}}},getUniversalVariable:function(){var uv=JSON.parse(JSON.stringify(window.universal_variable));if(qTracker.options.scrubUv){qTracker.scrubUv(uv)}if(uv){return qTracker.cleanEmptyValuesObj(uv)}},scrubUv:function(uv){if(uv&&uv.transaction){if(uv.transaction.billing){if(uv.transaction.billing.address){delete uv.transaction.billing.address}if(uv.transaction.billing.postcode){delete uv.transaction.billing.postcode}}if(uv.transaction.shipping){if(uv.transaction.shipping.address){delete uv.transaction.shipping.address}if(uv.transaction.shipping.postcode){delete uv.transaction.shipping.postcode}}}},isArray:function(obj){return(Object.prototype.toString.call(obj)==="[object Array]")},isObject:function(obj){var x=Object;return obj===x(obj)},cleanEmptyValuesObj:function(uv){var key;for(key in uv){if(uv.hasOwnProperty(key)){if((uv[key]===null)||(uv[key].length===0)){delete uv[key]}else{if(uv.hasOwnProperty){qTracker.cleanElement(uv[key])}}}}return uv},cleanEmptyValuesArray:function(array){var i,ii;for(i=0,ii=array.length;i<ii;i+=1){qTracker.cleanElement(array[i])}return array},cleanElement:function(el){if(qTracker.isArray(el)){qTracker.cleanEmptyValuesArray(el)}else{if(qTracker.isObject(el)){qTracker.cleanEmptyValuesObj(el)}}},callServer:function(ping,custom,postData){var pageNumber,url,referrer,cid,pageViewId,sc,onTime,d,query,meta;cid=q.cookie.Tracker.getVisitorId(qTracker.options.domain);meta=q.cookie.Tracker.getVisitorMetaData(qTracker.options.domain);pageViewId=q.cookie.PageView.update();pageNumber=qTracker.readPageNumber();query="?vn=2&id="+qTracker.options.clientId+"&cid="+encodeURIComponent(cid)+"&pid="+encodeURIComponent(pageViewId)+"&t="+new Date().getTime()+"&ping="+encodeURIComponent(ping);if(custom){query+="&v="+encodeURIComponent(custom)}if(ping<2){url=document.location.href;referrer=document.referrer;sc=q.cookie.SessionCounter.update(qTracker.options.domain);if(ping===0){onTime=0}else{d=new Date();onTime=d.getTime()-qTracker.loadTime.getTime()}query+="&pnum="+encodeURIComponent(pageNumber)+"&ont="+encodeURIComponent(onTime)+"&sc="+encodeURIComponent(sc)+"&ct="+(meta.canCookie?1:0)+"&bt="+((navigator.doNotTrack==="true")?"1":"0")+"&url="+encodeURIComponent(url)+"&ref="+encodeURIComponent(referrer)}qTracker.sendData(qTracker.options.serverUrl,query,postData);if((ping===0)&&!!qTracker.options.doCd){query+="&pongUrl="+encodeURIComponent(qTracker.options.serverUrl);query+="&cdt="+encodeURIComponent(qTracker.options.cdClient);if(qTracker.options.delayCD){q.html.ready(function(){qTracker.loadCd(query)})}else{qTracker.loadCd(query)}}},sendData:function(domain,query,postData){var url="//"+domain+query;if(postData){q.html.PostData(url,postData,"POST")}else{q.html.PostData(url,null,"GET")}if(qTracker.isIE){document.cookie="blah"}},loadCustom:function(){var customDataName,value,customDataEl,data=qTracker.initialData||{};qTracker.initialData={};for(customDataName in qTracker.customValues){if(qTracker.customValues.hasOwnProperty(customDataName)){try{customDataEl=qTracker.customValues[customDataName];if(!customDataEl.checkAmount){customDataEl.checkAmount=5}value=qTracker.loadCustomEl(customDataEl);if(value){data[customDataName]=value;if(!!customDataEl.sendAmount&&(customDataEl.sendAmount!==0)){qTracker.asyncCheck(customDataEl)}}else{qTracker.asyncCheck(customDataEl)}}catch(e){if(window.console&&window.console.log){console.log(e)}}}}return JSON.stringify(data)},loadCustomEl:function(customDataEl){var url,el,value;url=qTracker.getUrl();if(!customDataEl.pattern||new RegExp(customDataEl.pattern).test(url)){value="";switch(customDataEl.type){case"js":value=qTracker.getTextFromJs(customDataEl.key);break;case"id":el=document.getElementById(customDataEl.key);if(el){value=qTracker.getTextFromEl(el)}break;case"allClass":value=qTracker.getClassValues(customDataEl);break;case"classIndex":el=q.html.selectors.getElementsByClassName(customDataEl.key[0],customDataEl.key[2]);if(el&&el[customDataEl.key[1]]){value=qTracker.getTextFromEl(el[customDataEl.key[1]])}break;case"fn":try{value=customDataEl.key()}catch(e1){}break}try{if(customDataEl.extractor){value=customDataEl.extractor(value)}}catch(e2){}return value}},asyncCheck:function(customData){var timeout,timeoutId;if(customData.checkAmount!==0){customData.checkAmount-=1;timeout=customData.checkInterval?customData.checkInterval:1000;timeoutId=setTimeout(function(){qTracker.doAsyncCheck(customData)},timeout);qTracker.timeouts[customData.name]=timeoutId}},doAsyncCheck:function(customData){var value,data;delete qTracker.timeouts[customData.name];try{value=qTracker.loadCustomEl(customData)}catch(e){value=null}if(value){data={};data[customData.name]=value;qTracker.sendPing(JSON.stringify(data));if(customData.sendAmount){customData.sendAmount-=1;if(customData.sendAmount!==0){qTracker.asyncCheck(customData)}}}else{qTracker.asyncCheck(customData)}},sendPing:function(value){qTracker.callServer(2,value)},stopSending:function(){var t;for(t in qTracker.timeouts){if(qTracker.timeouts.hasOwnProperty(t)){clearTimeout(qTracker.timeouts[t]);delete qTracker.timeouts[t]}}},getUrl:function(){return document.location.href},getClassValues:function(customDataEl){var el,i,ii,values;el=q.html.selectors.getElementsByClassName(customDataEl.key);values=[];for(i=0,ii=el.length;i<ii;i+=1){values.push(qTracker.getTextFromEl(el[i]))}return values},getTextFromJs:function(valueName){var i,ii,keys,val;keys=valueName.split(".");if(keys.length>0){val=window[keys[0]];for(i=1,ii=keys.length;i<ii;i+=1){if(val&&val[keys[i]]){val=val[keys[i]]}else{return""}}return val}return""},getTextFromEl:function(el){var data="";if(el&&(el.innerText||el.textContent)){data=el.innerText||el.textContent;if(data.trim){data=data.trim()}if(data.replace){data=data.replace(/\s+/g," ")}}return data},loadCd:function(query){if(!document.body){setTimeout(function(){qTracker.loadCd(query)},500)}else{var cdFrame;cdFrame=document.createElement("iframe");cdFrame.src=qTracker.options.cdFrameLocation+"/cd.html"+query;cdFrame.width="1px";cdFrame.height="1px";cdFrame.style.border="none";cdFrame.style.position="absolute";if(qTracker.options.isRtl){cdFrame.style.right="-100px"}else{cdFrame.style.left="-100px"}document.body.appendChild(cdFrame)}}};if(!window.test_debug){qTracker.start()}}())}catch(e){if(window.debug){console.debug(e)}};